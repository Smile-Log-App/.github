<!-- Template for PROJECT REPORT of CapstoneDesign 2024-2H, initially written by khyoo -->
<!-- 본 파일은 2024년도 컴공 졸업프로젝트의 <1차보고서> 작성을 위한 기본 양식입니다. -->
<!-- 아래에 "*"..."*" 표시는 italic체로 출력하기 위해서 사용한 것입니다. -->
<!-- "내용"에 해당하는 부분을 지우고, 여러분 과제의 내용을 작성해 주세요. -->

# Team-Info
| (1) 과제명 | *스마일로그 SmileLog*
|:---  |---  |
| (2) 팀 번호 / 팀 이름 | 02/스마일리 |
| (3) 팀 구성원 | 조유담 (1942051): 리더, 프론트엔드, 화면 구현, 나무 시각화 <br> 조수연 (2071048): 팀원, 프론트엔드, UI/UX 디자인, 나무 시각화, AI <br> 김채은 (2130010) : 팀원, 백엔드, API 개발, DB 구축			 |
| (4) 팀 지도교수 | 심재형 교수님 |
| (5) 팀 멘토 | 고윤환 / 대표 / (주)캘커타커뮤니케이션 |
| (6) 과제 분류 | 산학과제 |
| (6) 과제 키워드 | 정신건강, GPT 프롬프트 엔지니어링, 시각화, AI NLP 감정분석, 일기, 챗봇 |
| (7) 과제 내용 요약 | Smile Log는 20대 청년층, 특히 대학생 및 사회 초년생을 대상으로 하는 AI 기반 감정 관리 서비스입니다. 사용자는 일기를 작성하면 AI가 감정을 분석해 주고, 그 결과를 시각적으로 나무 형태로 표현합니다. 감정의 원인을 파악하기 어려운 문제를 해결하기 위해, 챗봇은 감정에 대한 질문을 던져 스스로 회고할 수 있도록 돕습니다. 이 서비스는 OpenAI의 GPT 모델을 활용한 프롬프트 엔지니어링을 통해 사용자의 감정을 6가지 카테고리로 분석하며, 장기적으로 정신 건강 개선과 자기 이해를 돕는 것을 목표로 합니다. |

<br>

# Project-Summary
| 항목 | 내용 |
|:---  |---  |
| (1) 문제 정의 |**타겟 고객** -  20대 대학생 및 사회 초년생<br/><br/> **타겟 고객이 느끼는 문제점**<br/> 20대는 학업, 진로, 대인 관계 등 다양한 문제로 인해 감정의 기복이 심하며, 이로 인한 스트레스와 불안감을 자주 겪는 시기입니다. 이들은 자신이 어떤 것을 진정으로 원하는지 파악하고 이를 바탕으로 앞으로의 방향성을 탐색하고자 하나, 스스로에 대한 깊은 이해가 부족해 갈등을 겪습니다. 그들은 다음과 같은 구체적인 문제를 경험하고 있습니다.<br/>**- 감정 구체화**<br/> 오늘 하루 느낀 감정이 무엇인지 명확하게 파악하기 어려워, 자신의 감정을 스스로 표현하기 쉽지 않습니다.<br/>**- 감정의 원인 파악**<br/>감정의 원인을 이해하고 파악하는 데 어려움이 있어, 근본적인 감정의 해소까지 이어지기 어렵습니다.<br/><br/>**사회적 문제점**<br/> 최근 우울증과 불안장애를 겪는 20대 청년층이 급격히 증가하고 있습니다. 20대 우울증 환자 수는 2017년 7만 8천 명에서 2021년 17만 7천 명으로 127% 급증했으며, 불안장애 환자 수 또한 같은 기간 동안 5만 9천 명에서 11만 명으로 87% 증가했습니다. 20대 중 스트레스를 느끼는 비율은 37.9%로 다른 연령대보다 높으며, 이는 청년층의 감정 관리가 중요한 사회적 이슈임을 보여줍니다.<br/><br/>**해결책**<br/>**감정 구체화의 어려움 해결**: 감정 분석 AI를 통해 일기 내용을 자동으로 분석하여 사용자가 느낀 감정을 객관적으로 파악할 수 있도록 도와줍니다. 감정을 스스로 선택하지 않아도 AI가 결과를 제공하므로, 사용자들이 자신의 감정을 쉽게 인지할 수 있습니다.<br/>**감정 원인 파악의 어려움 해결**: 챗GPT 프롬프트 엔지니어링을 활용하여, "이 상황에서 어떤 이유 때문에 그러한 기분이 들었나요?"와 같은 질문을 통해 사용자가 스스로 감정의 근본적인 원인을 탐구할 수 있도록 지원합니다. 이는 사용자에게 자기 성찰의 기회를 제공하여 감정 해소와 자기 이해를 도울 수 있습니다.<br/><br/>**서비스의 설득력**<br/> [Lane, R.D. & Smith, R., 2021. *Levels of Emotional Awareness: Theory and Measurement of a Socio-Emotional Skill*. Journal of Intelligence, 9(3), p.42](https://doi.org/10.3390/jintelligence9030042) 에 따르면, 감정과 관련된 반응을 주의 깊게 살피고, 이를 개념화하는 과정에서 감정이 더욱 명확하게 인식될 수 있다고 합니다. 이 연구 결과는 스마일로그가 사용자가 자신의 감정을 구체화하고 감정의 원인을 이해하는 데에 도움을 줄 수 있음을 뒷받침합니다.  |
| (2) 기존 연구와의 비교 | 1. 아이폰 일기 앱 ‘일기’ <br/> 단점: 일기 기록만 가능하며, 일기 데이터를 활용한 기능이 없음. 오늘 느낀 감정을 직접 선택해야 함. <br/> 장점: 심플한 디자인과 기능으로 기본에 충실한 앱임. <br/><br/> 2. 감정일기 다이어리 - 무디 (moodee) <br/> 단점: 이모지로 순간의 감정만 표현하며, 감정을 누적하여 시각화하지 않음. 오늘 느낀 감정을 직접 선택해야 함. <br/> 장점: 사용자 친화적인 시각적 UI/UX 디자인으로 마음이 편안해지는 느낌을 줌. <br/><br/> 3. 감정을 쓰는 다이어리 - 무다 (mooda) <br/> 단점: 한 달의 감정 통계를 제공하지 않으며, 하루의 감정만 볼 수 있음. 오늘 느낀 감정을 직접 선택해야 함. <br/> 장점: 귀여운 이모지로 직관적으로 감정을 파악할 수 있음. <br/><br/> **스마일로그의 차별화**: 스마일로그는 사용자가 직접 감정을 선택하지 않아도 AI가 분석하여 제공함. 또한, 일별 감정을 나무로 시각화하고 월별 통계를 통해 사용자의 감정 변화를 직관적으로 확인할 수 있음. |
| (3) 제안 내용 | 타겟 고객의 문제점을 해결하기 위해, 스마일로그는 새로운 해결책을 제안함. 웹사이트로 개발된 스마일로그는 사용자가 일기를 작성하면 AI가 자동으로 감정을 분석하여 결과를 제공함. 감정 분석 결과를 나무로 시각화하여 직관적으로 보여주며, 사용자는 자신의 감정을 색을 통해 쉽게 인식할 수 있음. 또한, AI 챗봇이 심리 상담가처럼 질문을 던져 사용자가 일기 내용을 심층적으로 돌아볼 수 있게 도와줌. 이를 통해 스마일로그는 사용자가 스스로를 더 잘 이해하고 긍정적인 삶의 변화를 이끌어 갈 수 있도록 지원함. |
| (4) 기대 효과 및 의의 | 사용자는 일기를 통한 감정 분석으로 자기 인식을 향상시키고, 자신의 감정을 더 잘 이해할 수 있음. 감정을 반영한 나무 시각화를 통해 자신의 현재 상태를 객관적으로 인식하고, 긍정적 변화를 이룰 수 있는 의지를 강화함. 장기적으로 사용자의 정신 건강 개선과 삶의 질 향상에 기여할 것임. |
| (5) 주요 기능 리스트 | 1. **일기 작성** <br/> 사용자가 로그인하면 일기 작성과 감정 분석 기능이 활성화됨. 사용자가 일기를 작성하고 저장 버튼을 누르면 Next.js 서버로 내용이 전송되고, 서버는 OpenAI API에 일기 내용을 보내 감정 분석을 수행함. <br/><br/> 2. **감정 분석** <br/> OpenAI API를 사용하여 행복, 슬픔, 불안, 화남, 평온, 피곤의 여섯 가지 감정을 분석함. 각 감정의 비율을 퍼센트로 반환하며, 총합이 100%가 되도록 함. 분석 결과는 백엔드 EmotionAnalysis 테이블에 저장됨. <br/><br/> 3. **감정 시각화** <br/> - 월별 나무 시각화: 각 날짜의 주요 감정을 모아 빈도가 높은 세 가지를 색상으로 시각화함으로써 월간 감정 패턴을 직관적으로 보여줌. <br/> - 일별 나무 시각화: 일기에서 상위 세 가지 감정을 색상으로 표현하여 감정 분포를 나무로 시각화함. <br/><br/> 4. **캘린더 기능** <br/> - 일별 최상위 감정 이모지 표시: 각 날짜의 주요 감정을 이모지로 표시하여 캘린더에 나타냄. <br/> - 월별 감정 통계: 매달 감정 변화를 볼 수 있도록 월별 감정 통계를 생성함. <br/> - 일기 쓰기 페이지로 이동: 각 날짜를 클릭하면 해당 날짜의 일기 작성 페이지로 이동함. <br/><br/> 5. **챗봇 기능** <br/> - 일기 기반 질문 생성: 사용자가 일기를 작성하면 챗봇이 감정의 다양한 측면을 탐색할 수 있는 질문을 생성함. 질문을 통해 사용자가 감정의 원인을 이해할 수 있도록 돕고, 자기 탐색을 지원함. <br/> - 감정 탐구: 챗봇은 긍정적, 부정적 감정을 모두 다루며, 사용자의 경험과 감정이 어떻게 연관되는지 질문을 통해 탐구함. |


# Project-Design
| 항목 | 내용 |
|:---  |---  |
| (1) 요구사항 정의 | <img width="1013" alt="유저 플로우차트" src="https://github.com/user-attachments/assets/700b37f6-5f7a-4024-aa89-856ddceb3127"><br/>![Smile Log](https://github.com/user-attachments/assets/c19d3212-9f8b-437e-ad92-748535d12562)|
| (2) 전체 시스템 구성 | ![시스템 구성 이미지](https://github.com/user-attachments/assets/3edec36a-2f6e-4b66-ac2d-7a122984396d) <br/><br/> **Next.js (프론트엔드)** <br/> **설계 목적**: React 기반으로, 서버 사이드와 클라이언트 사이드 렌더링을 모두 지원하며, Node.js 백엔드를 거치지 않고 OpenAI API를 직접 호출할 수 있음.<br/> **역할**: 감정 분석과 챗봇 인터페이스 UI 제공. OpenAI API 호출을 통해 감정 분석 및 챗봇 질문 요청. 감정 분석 결과 및 챗봇 대화 내용을 API 서버로 전달해 저장.<br/> **기능 구현**: 감정 분석, 챗봇, 감정 시각화 기능을 제공하여 사용자 경험을 개선.<br/><br/> **Node.js + Express (백엔드 API 서버)** <br/> **설계 목적**: 비동기 처리를 통해 API 요청이 많은 감정 분석 기능에 적합한 서버 구조를 제공함.<br/> **역할**: 사용자 인증, 데이터 저장 및 조회, 프론트엔드와의 데이터 연동을 담당. Prisma와 연동하여 데이터베이스와의 상호작용을 간편화함.<br/> **기능 구현**: JWT 인증을 통한 보안 강화. 프론트엔드와 API 서버 간의 원활한 데이터 통신을 지원함.<br/><br/> **Prisma (데이터베이스 연동)** <br/> **설계 목적**: ORM을 통해 MySQL 데이터베이스와의 상호작용을 간편화함.<br/> **역할**: 일기와 감정 분석 결과를 MySQL에 저장하고, 프론트엔드에 필요한 데이터를 제공.<br/> **기능 구현**: 일관성 있는 데이터 저장 및 조회로 성능을 최적화함.<br/><br/> **OpenAI API** <br/> **설계 목적**: 감정 분석 및 챗봇 기능을 통해 사용자 경험을 향상시킴.<br/> **역할**: 일기 내용을 기반으로 감정 분석 수행. 챗봇 질문을 생성하여 감정 탐구를 지원함.<br/> **기능 구현**: 감정 분석 - 일기 내용을 바탕으로 주요 감정의 비율을 계산해 반환. 챗봇 - 감정 분석 결과를 기반으로, 상황에 맞는 질문을 던져 사용자의 감정을 탐구하도록 도움.<br/><br/> **Nginx (트래픽 관리)** <br/> **설계 목적**: 서버 트래픽을 효율적으로 관리하고, 로드 밸런싱을 통해 서버 성능을 최적화함.<br/> **역할**: 다수의 요청을 균등하게 분산하여 서버 과부하를 방지함.<br/><br/> **프롬프트 엔지니어링** <br/> **감정 분석 프롬프트**: OpenAI 모델을 상담사로 설정하여, 사용자의 일기를 기반으로 joy, sadness, anxiety, anger, neutrality, fatigue의 6가지 감정 비율을 반환하도록 함. 각 감정을 정의하고, 총합이 100%가 되도록 지시하여 일관성 있는 결과를 보장함.<br/> **챗봇 프롬프트**: 감정 탐구 도우미 역할을 부여하여 공감적이고 개방적인 질문을 던지도록 설정함. 감정의 긍정적/부정적 측면을 모두 다루며, 사용자가 자신의 감정을 이해하고 대처할 수 있는 방법을 탐구하도록 유도함. 사용자의 이전 응답을 기반으로 대화를 지속하며 감정 탐구를 돕는다. |
| (3) 진척도 및 검증내역 | - 스타트 검증 내용(진척도 21% - 19개 항목 중 4개 완료) <br> [AI] 감정 분석 : 네이버 클로바 센티먼트 AI API 활용하여 3가지 구분, 백엔드와 네이버 클로바 센티먼트 AI API 연결 <br> [FE] 일기 작성 화면 제작, 일기 감정 분석 결과에 따라 나무 성장 구현(긍정 퍼센티지만큼 성장, 중립 및 긍정은 성장 안 함) <br><br> - 그로쓰 현시점까지 검증 내용(진척도 74% - 19개 항목 중 14개 완료 <br> [AI] 감정 분석 : OpenAI API 활용하여 6가지 구분, 프론트엔드와 OpenAI API 연결 <br> [FE] 월별 조회 화면 제작, 일기 감정 분석 결과 중 top3 감정을 나무 색으로 반영(그로쓰 때 추가된 기획), 백엔드와 연결, 로그인, 회원가입 화면 제작 <br> [BE] 일기 작성 엔드포인트 개발, 일기 일별, 월별 조회 엔드포인트 개발, 유저 기능(유저 인증 및 인가) 개발, 에러 처리 세분화 <br><br> - 그로쓰 현시점까지 미검증 내용(남은 진척도 26% - 19개 항목 중 5개 미완료) <br> [AI] 챗봇 대화 기능 : 시작 전, 10월 13일까지 완료 예정 <br> [FE] 챗봇 대화 화면 제작 : 시작 전, 10월 13일까지 완료 예정, 배포 : 시작 전, 11월 4일까지 완료 예정 <br> [BE] 챗봇 대화 저장 엔드포인트 제작 : 시작 전, 10월 13일까지 완료 예정, 배포 : 시작 전, 11월 4일까지 완료 예정 |
| (4) 기타 | *기타 사항을 기술* |

<br>
